# travis CI config
language: python
python:
  - 3.5
  - 3.6
  - 3.7
  - 3.8-dev
  - pypy3.5
matrix:
  fast_finish: true

# Use fast travis build infrastructure explicitly
dist: xenial
sudo: false

before_install:
  - sudo apt-get update -qq
  - sudo usermod -a -G audio travis
  - sudo apt-get install -y portaudio19-dev
  - sudo apt-get install -y libasound2-dev alsa-utils alsa-oss
  - sudo bash tests/prep-dummy-soundcard.sh
env:
  global:
    - AUDIODEV=null
install:
  - pip install .
script:
  - aplay -l
  - lspci -v | grep -A7 -i "audio"
  - lsmod | grep snd
  - amixer -c 0
  - python setup.py test
  - python -E -Wall -bb -c 'import miniaudio'
